{% extends 'PatentMS/base_model.html'%}
{% load static %} 
{% block title_block%} 
用户登录 
{% endblock %} 
{% block body_block %}
<div class="jumbotron p-4">
  <div class="container">
    <h1 class="jumbotron-heading">用户登录</h1>
    <p class="lead">欢迎使用新浪专利管理系统</p>
  </div>
</div>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-6">
      <div class="card">
        <div class="card-body">
          <form id="login_form" method="post" action="{% url 'login' %}">
            {% csrf_token %} {% if messages %} {% for message in messages %}
            <div
              class="alert alert-{{ message.tags }} alert-dismissible fade show"
              role="alert"
            >
              {{ message }}
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="alert"
              ></button>
            </div>
            {% endfor %} {% endif %}

            <div class="form-group mb-3">
              <label for="id_username" class="form-label">用户名</label>
              <input
                type="text"
                name="username"
                id="id_username"
                class="form-control"
                placeholder="请输入用户名"
                required
              />
            </div>

            <div class="form-group mb-3">
              <label for="id_password" class="form-label">密码</label>
              <input
                type="password"
                name="password"
                id="id_password"
                class="form-control"
                placeholder="请输入密码"
                required
              />
            </div>

            <div class="d-grid gap-2">
              <button type="submit" class="btn btn-primary btn-lg">
                <i class="fas fa-sign-in-alt"></i> 登录
              </button>
            </div>
          </form>

          <hr class="my-4" />

          <div class="text-center">
            <p>还没有账号？</p>
            <a
              href="{% url 'registration_register' %}"
              class="btn btn-outline-primary"
            >
              <i class="fas fa-user-plus"></i> 立即注册
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {
    // 表单验证
    $("#login_form").on("submit", function (e) {
      var username = $("#id_username").val().trim();
      var password = $("#id_password").val().trim();

      if (!username) {
        alert("请输入用户名");
        $("#id_username").focus();
        e.preventDefault();
        return false;
      }

      if (!password) {
        alert("请输入密码");
        $("#id_password").focus();
        e.preventDefault();
        return false;
      }
    });

    // 自动聚焦到用户名输入框
    $("#id_username").focus();
  });
</script>
{% endblock %}
